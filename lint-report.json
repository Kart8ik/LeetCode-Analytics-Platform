[{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\components\\ExampleChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\components\\LoginNavbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\components\\TopNavbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\components\\ui\\chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\components\\ui\\hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\components\\ui\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\components\\ui\\sidebar.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":727,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":727,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\context\\AuthContext.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":89,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":89,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\hooks\\use-mobile.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\lib\\supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\pages\\Dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":152,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5455,5458],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5455,5458],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":169,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6015,6018],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6015,6018],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":186,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":186,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6598,6601],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6598,6601],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { ExampleChart } from '@/components/ExampleChart'\r\nimport { useEffect, useState, useMemo } from 'react'\r\nimport TopNavbar from '@/components/TopNavbar'\r\nimport { useAuth } from '@/context/AuthContext'\r\nimport { supabase } from '@/lib/supabase'\r\nimport { toast } from 'sonner'\r\nimport { Flame, Calendar } from 'lucide-react'\r\nimport { HoverCard, HoverCardContent, HoverCardTrigger } from '@/components/ui/hover-card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Copy } from 'lucide-react'\r\n\r\ninterface RecentSubmission {\r\n  id: string\r\n  title: string\r\n  titleSlug: string\r\n  timestamp: string\r\n}\r\n\r\ninterface TopicStat {\r\n  difficulty_level: string\r\n  problems_solved: number\r\n  tag_name: string\r\n  user_id: string\r\n}\r\n\r\ninterface LanguageStat {\r\n  user_id: string\r\n  language_name: string\r\n  problems_solved: number\r\n}\r\n\r\ninterface UserDetails {\r\n  problem_stats?: {\r\n    total_solved?: number\r\n    easy_solved?: number\r\n    medium_solved?: number\r\n    hard_solved?: number\r\n  }\r\n  progress_stats?: {\r\n    streak_count?: number\r\n    total_active_days?: number\r\n    recent_submissions?: string | RecentSubmission[]\r\n    submission_calendar_json?: string\r\n  }\r\n  topic_stats?: TopicStat[]\r\n  language_stats?: LanguageStat[]\r\n}\r\n\r\nconst Dashboard = () => {\r\n  const { user} = useAuth()\r\n  const [userDetails, setUserDetails] = useState<UserDetails | null>(null)\r\n\r\n  // Format user details as a chatbot prompt\r\n  const formattedPrompt = useMemo(() => {\r\n    if (!userDetails) return ''\r\n\r\n    const prompt = `I am a LeetCode user with the following coding statistics and profile:\r\n\r\n**Problem Solving Statistics:**\r\n- Total Problems Solved: ${userDetails?.problem_stats?.total_solved || 0}\r\n- Easy Problems: ${userDetails?.problem_stats?.easy_solved || 0}\r\n- Medium Problems: ${userDetails?.problem_stats?.medium_solved || 0}\r\n- Hard Problems: ${userDetails?.problem_stats?.hard_solved || 0}\r\n\r\n**Activity & Consistency:**\r\n- Current Streak: ${userDetails?.progress_stats?.streak_count || 0} days\r\n- Total Active Days: ${userDetails?.progress_stats?.total_active_days || 0} days\r\n\r\n**Programming Languages:**\r\n${(() => {\r\n        try {\r\n          const langStats = Array.isArray(userDetails?.language_stats)\r\n            ? (userDetails.language_stats as LanguageStat[])\r\n            : []\r\n          if (langStats.length === 0) return '- No language statistics available'\r\n          return langStats\r\n            .sort((a: LanguageStat, b: LanguageStat) => (b.problems_solved || 0) - (a.problems_solved || 0))\r\n            .slice(0, 5)\r\n            .map((lang: LanguageStat) => `- ${lang.language_name}: ${lang.problems_solved} problems solved`)\r\n            .join('\\n')\r\n        } catch {\r\n          return '- No language statistics available'\r\n        }\r\n      })()}\r\n\r\n**Topic Expertise:**\r\n${(() => {\r\n        try {\r\n          const topicStats = Array.isArray(userDetails?.topic_stats)\r\n            ? (userDetails.topic_stats as TopicStat[])\r\n            : []\r\n          if (topicStats.length === 0) return '- No topic statistics available'\r\n          const topTopics = topicStats\r\n            .sort((a: TopicStat, b: TopicStat) => (b.problems_solved || 0) - (a.problems_solved || 0))\r\n            .slice(0, 10)\r\n            .map((topic: TopicStat) => `- ${topic.tag_name} (${topic.difficulty_level}): ${topic.problems_solved} problems`)\r\n            .join('\\n')\r\n          return topTopics\r\n        } catch {\r\n          return '- No topic statistics available'\r\n        }\r\n      })()}\r\n\r\n**Recent Activity:**\r\n${(() => {\r\n        try {\r\n          const recentSubs = typeof userDetails?.progress_stats?.recent_submissions === 'string'\r\n            ? (JSON.parse(userDetails.progress_stats.recent_submissions) as RecentSubmission[])\r\n            : (userDetails?.progress_stats?.recent_submissions as RecentSubmission[]) || []\r\n          if (!Array.isArray(recentSubs) || recentSubs.length === 0) {\r\n            return '- No recent submissions'\r\n          }\r\n          return recentSubs\r\n            .slice(0, 5)\r\n            .map((sub: RecentSubmission) => `- ${sub.title || 'Unknown'}`)\r\n            .join('\\n')\r\n        } catch {\r\n          return '- No recent submissions available'\r\n        }\r\n      })()}\r\n\r\nBased on this profile, please provide personalized coding practice recommendations, problem suggestions, and learning path guidance.`\r\n\r\n    return prompt\r\n  }, [userDetails])\r\n\r\n  const handleCopyPrompt = async () => {\r\n    try {\r\n      await navigator.clipboard.writeText(formattedPrompt)\r\n      toast.success('Prompt copied to clipboard!')\r\n    } catch {\r\n      toast.error('Failed to copy prompt')\r\n    }\r\n  }\r\n\r\n\r\n  // Parse recent submissions from JSON string\r\n  const recentSubmissions = useMemo<RecentSubmission[]>(() => {\r\n    if (!userDetails?.progress_stats?.recent_submissions) return []\r\n    \r\n    try {\r\n      const jsonStr = typeof userDetails.progress_stats.recent_submissions === 'string' \r\n        ? userDetails.progress_stats.recent_submissions \r\n        : JSON.stringify(userDetails.progress_stats.recent_submissions)\r\n      \r\n      const parsed = JSON.parse(jsonStr)\r\n      return Array.isArray(parsed) ? parsed : []\r\n    } catch (err) {\r\n          // debug-level log parsing problems; tests intentionally exercise malformed JSON\r\n          console.debug('Error parsing recent submissions:', (err as any)?.message ?? String(err))\r\n      return []\r\n    }\r\n  }, [userDetails])\r\n\r\n  // Parse topic stats\r\n  const topicStats = useMemo<TopicStat[]>(() => {\r\n    if (!userDetails?.topic_stats) return []\r\n    \r\n    try {\r\n      const stats = Array.isArray(userDetails.topic_stats) \r\n        ? userDetails.topic_stats \r\n        : []\r\n      \r\n      // Sort by problems_solved descending\r\n      return [...stats].sort((a, b) => (b.problems_solved || 0) - (a.problems_solved || 0))\r\n    } catch (error) {\r\n          console.debug('Error parsing topic stats:', (error as any)?.message ?? String(error))\r\n      return []\r\n    }\r\n  }, [userDetails])\r\n\r\n  // Parse language stats\r\n  const languageStats = useMemo<LanguageStat[]>(() => {\r\n    if (!userDetails?.language_stats) return []\r\n    \r\n    try {\r\n      const stats = Array.isArray(userDetails.language_stats) \r\n        ? userDetails.language_stats \r\n        : []\r\n      \r\n      // Sort by problems_solved descending\r\n      return [...stats].sort((a, b) => (b.problems_solved || 0) - (a.problems_solved || 0))\r\n    } catch (error) {\r\n          console.debug('Error parsing language stats:', (error as any)?.message ?? String(error))\r\n      return []\r\n    }\r\n  }, [userDetails])\r\n\r\n  // Get difficulty level color\r\n  const getDifficultyColor = (difficulty: string) => {\r\n    switch (difficulty.toLowerCase()) {\r\n      case 'fundamental':\r\n        return 'bg-blue-500/10 text-blue-600 dark:text-blue-400'\r\n      case 'intermediate':\r\n        return 'bg-yellow-500/10 text-yellow-600 dark:text-yellow-400'\r\n      case 'advanced':\r\n        return 'bg-red-500/10 text-red-600 dark:text-red-400'\r\n      default:\r\n        return 'bg-gray-500/10 text-gray-600 dark:text-gray-400'\r\n    }\r\n  }\r\n\r\n  // Format difficulty level\r\n  const formatDifficulty = (difficulty: string) => {\r\n    return difficulty.charAt(0).toUpperCase() + difficulty.slice(1).toLowerCase()\r\n  }\r\n\r\n  // Format timestamp to human-readable format\r\n  const formatTimeAgo = (timestamp: string): string => {\r\n    try {\r\n      const timestampNum = parseInt(timestamp, 10)\r\n      if (isNaN(timestampNum)) return 'Unknown'\r\n      \r\n      const now = Math.floor(Date.now() / 1000)\r\n      const diff = now - timestampNum\r\n      \r\n      if (diff < 60) return 'Just now'\r\n      if (diff < 3600) {\r\n        const minutes = Math.floor(diff / 60)\r\n        return `${minutes} minute${minutes !== 1 ? 's' : ''} ago`\r\n      }\r\n      if (diff < 86400) {\r\n        const hours = Math.floor(diff / 3600)\r\n        return `${hours} hour${hours !== 1 ? 's' : ''} ago`\r\n      }\r\n      if (diff < 604800) {\r\n        const days = Math.floor(diff / 86400)\r\n        return `${days} day${days !== 1 ? 's' : ''} ago`\r\n      }\r\n      if (diff < 2592000) {\r\n        const weeks = Math.floor(diff / 604800)\r\n        return `${weeks} week${weeks !== 1 ? 's' : ''} ago`\r\n      }\r\n      if (diff < 31536000) {\r\n        const months = Math.floor(diff / 2592000)\r\n        return `${months} month${months !== 1 ? 's' : ''} ago`\r\n      }\r\n      const years = Math.floor(diff / 31536000)\r\n      return `${years} year${years !== 1 ? 's' : ''} ago`\r\n    } catch {\r\n      return 'Unknown'\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    const fetchUserDetails = async () => {\r\n      const { data, error } = await supabase.rpc('get_user_details', {\r\n        p_user_id: user?.id\r\n      })\r\n      if (error){\r\n        toast.error(error.message)\r\n      } else {\r\n  toast.success(\"User details fetched successfully\")\r\n  console.debug(\"user details\", data)\r\n        setUserDetails(data)\r\n      }\r\n    }\r\n    if (user?.id) {\r\n      fetchUserDetails()\r\n    }\r\n  }, [user])\r\n\r\n  return (\r\n    <>\r\n      <TopNavbar />\r\n      <div className=\"w-full space-y-6 px-4 md:px-6 pt-4 md:pt-6 pb-4 md:pb-6 bg-background\">\r\n        {/* Header */}\r\n        {/* Flexbox 1: Stats Cards - Total Solved, Easy, Medium, Hard */}\r\n        <div className=\"flex flex-col sm:flex-row gap-4 w-full\">\r\n          <Card className=\"flex-1\">\r\n            <CardHeader>\r\n              <CardDescription>Total Solved</CardDescription>\r\n              <CardTitle className=\"text-2xl\">{userDetails?.problem_stats?.total_solved}</CardTitle>\r\n            </CardHeader>\r\n          </Card>\r\n\r\n          <Card className=\"flex-1\">\r\n            <CardHeader>\r\n              <CardDescription>Easy Problems Solved</CardDescription>\r\n              <CardTitle className=\"text-2xl\">{userDetails?.problem_stats?.easy_solved}</CardTitle>\r\n            </CardHeader>\r\n          </Card>\r\n\r\n          <Card className=\"flex-1\">\r\n            <CardHeader>\r\n              <CardDescription>Medium Problems Solved</CardDescription>\r\n              <CardTitle className=\"text-2xl\">{userDetails?.problem_stats?.medium_solved}</CardTitle>\r\n            </CardHeader>\r\n          </Card>\r\n\r\n          <Card className=\"flex-1\">\r\n            <CardHeader>\r\n              <CardDescription>Hard Problems Solved</CardDescription>\r\n              <CardTitle className=\"text-2xl\">{userDetails?.problem_stats?.hard_solved}</CardTitle>\r\n            </CardHeader>\r\n          </Card>\r\n          <Card className=\"flex-1 p-0 overflow-hidden flex\">\r\n            <HoverCard>\r\n              <HoverCardTrigger asChild>\r\n                <Button \r\n                  className=\"w-full h-full rounded-none border-0 flex-1 text-xl\" \r\n                  variant=\"default\"\r\n                  size=\"lg\"\r\n                >\r\n                  Get Custom Prompt\r\n                </Button>\r\n              </HoverCardTrigger>\r\n              <HoverCardContent className=\"w-[500px] max-h-[600px] overflow-y-auto\">\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <h4 className=\"text-sm font-semibold\">Custom Chatbot Prompt</h4>\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={handleCopyPrompt}\r\n                      className=\"h-8 w-8 p-0\"\r\n                      disabled={!formattedPrompt}\r\n                    >\r\n                      <Copy className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                  {formattedPrompt ? (\r\n                    <div className=\"text-sm whitespace-pre-wrap font-mono bg-muted p-4 rounded-lg border\">\r\n                      {formattedPrompt}\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-sm text-muted-foreground\">\r\n                      Loading user details...\r\n                    </div>\r\n                  )}\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    Click the copy button to copy this prompt and use it with any AI chatbot for personalized coding recommendations.\r\n                  </p>\r\n                </div>\r\n              </HoverCardContent>\r\n            </HoverCard>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Flexbox 2: Chart Section */}\r\n        <div className=\"flex w-full\">\r\n          <Card className=\"flex-1 w-full\">\r\n            <CardHeader>\r\n              <CardTitle>Solving Progress</CardTitle>\r\n              <CardDescription>Monthly problem solving statistics</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"pl-2\">\r\n              <ExampleChart submissionCalendar={userDetails?.progress_stats?.submission_calendar_json} />\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Flexbox 3: Streak Stats and Language Stats */}\r\n        <div className=\"flex flex-col lg:flex-row gap-4 w-full\">\r\n          <Card className=\"flex-1 flex flex-col\">\r\n            <CardHeader>\r\n              <CardTitle>Streak Stats</CardTitle>\r\n              <CardDescription>Your streak statistics</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"flex-1 flex flex-col justify-center gap-6\">\r\n              <div className=\"flex flex-col items-center justify-center p-6 rounded-lg border bg-gradient-to-br from-[var(--primary)]/20 to-[var(--chart-3)]/20 dark:from-[var(--primary)]/20 dark:to-[var(--chart-3)]/20\">\r\n                <div className=\"flex items-center gap-3 mb-2\">\r\n                  <Flame className=\"h-6 w-6 text-primary\" />\r\n                  <CardDescription className=\"text-sm font-medium text-foreground mb-0\">\r\n                    Max Streak\r\n                  </CardDescription>\r\n                </div>\r\n                <CardTitle className=\"text-4xl font-bold text-primary\">\r\n                  {userDetails?.progress_stats?.streak_count ?? 0}\r\n                </CardTitle>\r\n                <p className=\"text-xs text-muted-foreground mt-1\">highest streak you have had</p>\r\n              </div>\r\n              \r\n              <div className=\"flex flex-col items-center justify-center p-6 rounded-lg border bg-gradient-to-br from-[var(--chart-2)]/20 to-[var(--chart-1)]/20 dark:from-[var(--chart-2)]/20 dark:to-[var(--chart-1)]/20\">\r\n                <div className=\"flex items-center gap-3 mb-2\">\r\n                  <Calendar className=\"h-6 w-6 text-[var(--chart-2)]\" />\r\n                  <CardDescription className=\"text-sm font-medium text-foreground mb-0\">\r\n                    Total Active Days\r\n                  </CardDescription>\r\n                </div>\r\n                <CardTitle className=\"text-4xl font-bold text-[var(--chart-2)]\">\r\n                  {userDetails?.progress_stats?.total_active_days ?? 0}\r\n                </CardTitle>\r\n                <p className=\"text-xs text-muted-foreground mt-1\">days of coding</p>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card className=\"flex-1 flex flex-col\">\r\n            <CardHeader>\r\n              <CardTitle>Language Stats</CardTitle>\r\n              <CardDescription>Problems solved by programming language</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"flex-1 overflow-y-auto max-h-[400px]\">\r\n              {languageStats.length === 0 ? (\r\n                <div className=\"flex items-center justify-center py-8 text-muted-foreground\">\r\n                  <p className=\"text-sm\">No language stats found</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-3 pr-2\">\r\n                  {languageStats.map((lang, index) => (\r\n                    <div \r\n                      key={`${lang.language_name}-${index}`}\r\n                      className=\"flex items-center justify-between gap-3 p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors\"\r\n                    >\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <p className=\"text-sm font-medium truncate\">\r\n                          {lang.language_name}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2 shrink-0\">\r\n                        <span className=\"text-sm font-semibold text-foreground\">\r\n                          {lang.problems_solved}\r\n                        </span>\r\n                        <span className=\"text-xs text-muted-foreground\">\r\n                          solved\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n        {/* Flexbox 4: Recent Submissions and Topic Stats */}\r\n        <div className=\"flex flex-col lg:flex-row gap-4 w-full\">\r\n          <Card className=\"flex-1 flex flex-col\">\r\n            <CardHeader>\r\n              <CardTitle>Recent Submissions</CardTitle>\r\n              <CardDescription>Your latest solved problems</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"flex-1 overflow-y-auto max-h-[400px]\">\r\n              {recentSubmissions.length === 0 ? (\r\n                <div className=\"flex items-center justify-center py-8 text-muted-foreground\">\r\n                  <p className=\"text-sm\">No recent submissions found</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-4 pr-2\">\r\n                  {recentSubmissions.map((submission) => (\r\n                    <div \r\n                      key={submission.id} \r\n                      className=\"flex items-center gap-2 sm:gap-4 p-2 rounded-lg hover:bg-accent/50 transition-colors\"\r\n                    >\r\n                      <div className=\"flex size-8 sm:size-9 items-center justify-center rounded-full font-semibold text-xs sm:text-sm shrink-0 bg-green-500/10 text-green-600 dark:text-green-400\">\r\n                        ✓\r\n                      </div>\r\n                      <div className=\"flex-1 space-y-1 min-w-0\">\r\n                        <p className=\"text-sm py-1 font-medium leading-none truncate\">\r\n                          {submission.title}\r\n                        </p>\r\n                        <a\r\n                          href={`https://leetcode.com/problems/${submission.titleSlug}`}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors truncate block\"\r\n                        >\r\n                          View on LeetCode →\r\n                        </a>\r\n                      </div>\r\n                      <div className=\"text-xs text-muted-foreground hidden sm:block whitespace-nowrap\">\r\n                        {formatTimeAgo(submission.timestamp)}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card className=\"flex-1 flex flex-col\">\r\n            <CardHeader>\r\n              <CardTitle>Topic Stats</CardTitle>\r\n              <CardDescription>Your topic-wise problem solving statistics</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"flex-1 overflow-y-auto max-h-[400px]\">\r\n              {topicStats.length === 0 ? (\r\n                <div className=\"flex items-center justify-center py-8 text-muted-foreground\">\r\n                  <p className=\"text-sm\">No topic stats found</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-3 pr-2\">\r\n                  {topicStats.map((topic, index) => (\r\n                    <div \r\n                      key={`${topic.tag_name}-${topic.difficulty_level}-${index}`}\r\n                      className=\"flex items-center justify-between gap-3 p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors\"\r\n                    >\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <div className=\"flex items-center gap-2 mb-1\">\r\n                          <p className=\"text-sm font-medium truncate\">\r\n                            {topic.tag_name}\r\n                          </p>\r\n                          <span className={`px-2 py-0.5 rounded-full text-xs font-medium shrink-0 ${getDifficultyColor(topic.difficulty_level)}`}>\r\n                            {formatDifficulty(topic.difficulty_level)}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2 shrink-0\">\r\n                        <span className=\"text-sm font-semibold text-foreground\">\r\n                          {topic.problems_solved}\r\n                        </span>\r\n                        <span className=\"text-xs text-muted-foreground\">\r\n                          solved\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Dashboard","usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\pages\\Leaderboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":329,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":329,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12720,12723],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12720,12723],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useMemo, useState, useEffect } from 'react'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport {\r\n  Select,\r\n  SelectTrigger,\r\n  SelectValue,\r\n  SelectContent,\r\n  SelectItem,\r\n} from '@/components/ui/select'\r\nimport { Medal } from 'lucide-react'\r\nimport TopNavbar from '@/components/TopNavbar'\r\nimport { Button } from '@/components/ui/button'\r\nimport { useAuth } from '@/context/AuthContext'\r\nimport { supabase } from '@/lib/supabase'\r\nimport { toast } from 'sonner'\r\n\r\ntype LeaderboardUser = {\r\n  user_id: string\r\n  username: string\r\n  real_name: string\r\n  user_url?: string\r\n  section?: string | number\r\n  semester?: string | number\r\n  easy_solved: number\r\n  medium_solved: number\r\n  hard_solved: number\r\n  total_solved: number\r\n  streak_count: number\r\n  global_rank?: number | null\r\n}\r\n\r\nexport default function Leaderboard() {\r\n  const [leaderboard, setLeaderboard] = useState<LeaderboardUser[]>([])\r\n  const [isLoading, setIsLoading] = useState<boolean>(true)\r\n  const [isFiltering, setIsFiltering] = useState<boolean>(false)\r\n  const [query, setQuery] = useState('')\r\n  const [sortColumn, setSortColumn] = useState<\r\n    'global_rank' | 'total_solved' | 'easy_solved' | 'medium_solved' | 'hard_solved' | 'streak_count'\r\n  >('global_rank')\r\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('asc')\r\n  const [filterSection, setFilterSection] = useState<string | 'all'>('all')\r\n  const [filterSemester, setFilterSemester] = useState<string | 'all'>('all')\r\n  const { role } = useAuth()\r\n\r\n  useEffect(() => {\r\n    const fetchLeaderboard = async () => {\r\n      setIsLoading(true)\r\n      try {\r\n        const { data, error } = await supabase.rpc('get_leaderboard_json')\r\n        if (error) {\r\n          toast.error(error.message)\r\n        } else {\r\n          setLeaderboard(data || [])\r\n          toast.success('Leaderboard fetched successfully')\r\n        }\r\n      } catch {\r\n        toast.error('Failed to fetch leaderboard')\r\n      } finally {\r\n        setIsLoading(false)\r\n      setIsLoading(true)\r\n      try {\r\n        const { data, error } = await supabase.rpc('get_leaderboard_json')\r\n        if (error) {\r\n          toast.error(error.message)\r\n        } else {\r\n          setLeaderboard(data || [])\r\n          toast.success('Leaderboard fetched successfully')\r\n        }\r\n      } catch {\r\n        toast.error('Failed to fetch leaderboard')\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    }\r\n    }\r\n\r\n\r\n    fetchLeaderboard()\r\n  }, [])\r\n\r\n  const sections = useMemo(() => {\r\n    return Array.from(new Set(leaderboard.map(u => u.section).filter(Boolean))).sort()\r\n  }, [leaderboard])\r\n\r\n  const semesters = useMemo(() => {\r\n    return Array.from(new Set(leaderboard.map(u => u.semester).filter(Boolean))).sort()\r\n  }, [leaderboard])\r\n\r\n  const filtered = useMemo(() => {\r\n    const q = query.trim().toLowerCase()\r\n\r\n    const base = leaderboard.filter(u => {\r\n      const matchesQuery = [u.real_name, u.username, u.section, u.semester]\r\n        .some(val => String(val ?? '').toLowerCase().includes(q))\r\n      const matchesSection = filterSection === 'all' || String(u.section) === String(filterSection)\r\n      const matchesSemester = filterSemester === 'all' || String(u.semester) === String(filterSemester)\r\n      return matchesQuery && matchesSection && matchesSemester\r\n    })\r\n\r\n    // Primary sort by selected column (global_rank special-cased)\r\n    base.sort((a, b) => {\r\n      if (sortColumn === 'global_rank') {\r\n        const aGlobal = typeof a.global_rank === 'number' ? a.global_rank : Infinity\r\n        const bGlobal = typeof b.global_rank === 'number' ? b.global_rank : Infinity\r\n        return sortOrder === 'asc' ? aGlobal - bGlobal : bGlobal - aGlobal\r\n      }\r\n\r\n      const aVal = a[sortColumn]\r\n      const bVal = b[sortColumn]\r\n      if (typeof aVal === 'number' && typeof bVal === 'number') {\r\n        return sortOrder === 'asc' ? aVal - bVal : bVal - aVal\r\n      }\r\n\r\n      return 0\r\n    })\r\n\r\n    return base\r\n  }, [leaderboard, query, filterSection, filterSemester, sortColumn, sortOrder])\r\n\r\n  // Show a quick filtering indicator when query/filters/sort change\r\n  useEffect(() => {\r\n    // Don't show filtering overlay during initial load\r\n    if (isLoading) return\r\n    setIsFiltering(true)\r\n    const id = window.setTimeout(() => setIsFiltering(false), 180)\r\n    return () => clearTimeout(id)\r\n  }, [query, filterSection, filterSemester, sortColumn, sortOrder, leaderboard, isLoading])\r\n\r\n  // Map of DB rank (position in the fetched leaderboard array)\r\n  const dbRankMap = useMemo(() => {\r\n    const m = new Map<string, number>()\r\n    leaderboard.forEach((u, i) => {\r\n      if (u.user_id) m.set(u.user_id, i + 1)\r\n    })\r\n    return m\r\n  }, [leaderboard])\r\n\r\n  // Avatar removed — leaderboard shows medal + DB rank in the left column\r\n\r\n  const clearFilters = () => {\r\n    setQuery('')\r\n    setFilterSection('all')\r\n    setFilterSemester('all')\r\n    setSortColumn('global_rank')\r\n    setSortOrder('asc')\r\n  }\r\n\r\n  const downloadCSV = () => {\r\n    if (!filtered.length) {\r\n      toast('No data to download')\r\n      return\r\n    }\r\n\r\n    const headers = [\r\n      'rank', 'user_id', 'username', 'real_name', 'easy_solved',\r\n      'medium_solved', 'hard_solved', 'total_solved', 'streak_count',\r\n      'global_rank', 'section', 'semester'\r\n    ]\r\n\r\n    const rows = filtered.map(u => [\r\n      dbRankMap.get(u.user_id) ?? '-',\r\n      u.user_id,\r\n      u.username,\r\n      u.real_name,\r\n      u.easy_solved,\r\n      u.medium_solved,\r\n      u.hard_solved,\r\n      u.total_solved,\r\n      u.streak_count,\r\n      u.global_rank ?? '-',\r\n      u.section ?? '-',\r\n      u.semester ?? '-',\r\n    ])\r\n\r\n    const csv = [headers, ...rows]\r\n      .map(r => r.map(c => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(','))\r\n      .join('\\n')\r\n\r\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' })\r\n    const url = URL.createObjectURL(blob)\r\n    const link = document.createElement('a')\r\n    link.href = url\r\n    link.download = 'leaderboard.csv'\r\n    document.body.appendChild(link)\r\n    link.click()\r\n    document.body.removeChild(link)\r\n    URL.revokeObjectURL(url)\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n      <TopNavbar />\r\n      <div className=\"w-full space-y-6 px-4 md:px-6 pt-4 md:pt-6 pb-4 md:pb-6 bg-background\">\r\n        <Card>\r\n          <CardHeader className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\r\n            <CardTitle className=\"text-2xl font-semibold tracking-tight\">Leaderboard</CardTitle>\r\n\r\n            <div className=\"flex flex-col sm:flex-row gap-3 sm:items-center\">\r\n              <Input\r\n                value={query}\r\n                onChange={e => setQuery(e.target.value)}\r\n                placeholder=\"Search by name\"\r\n                className=\"w-full sm:w-64\"\r\n              />\r\n\r\n              <div className=\"flex items-center gap-2\">\r\n                <Select\r\n                  value={sortColumn}\r\n                  onValueChange={(v: string) => setSortColumn(v as typeof sortColumn)}\r\n                >\r\n                  <SelectTrigger size=\"sm\" className=\"w-40\">\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"global_rank\">Global Rank</SelectItem>\r\n                    <SelectItem value=\"total_solved\">Total Solved</SelectItem>\r\n                    <SelectItem value=\"easy_solved\">Easy</SelectItem>\r\n                    <SelectItem value=\"medium_solved\">Medium</SelectItem>\r\n                    <SelectItem value=\"hard_solved\">Hard</SelectItem>\r\n                    <SelectItem value=\"streak_count\">Streak</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n\r\n                <Select value={sortOrder} onValueChange={(v: string) => setSortOrder(v as 'asc' | 'desc')}>\r\n                  <SelectTrigger size=\"sm\" className=\"w-32\">\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"asc\">Ascending</SelectItem>\r\n                    <SelectItem value=\"desc\">Descending</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              {role === 'admin' && (\r\n                <>\r\n                  <Select\r\n                    value={filterSection}\r\n                    onValueChange={(v: string) => setFilterSection((v as string) || 'all')}\r\n                  >\r\n                    <SelectTrigger size=\"sm\" className=\"w-40\">\r\n                      <SelectValue />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"all\">All Sections</SelectItem>\r\n                      {sections.map(s => (\r\n                        <SelectItem key={s} value={String(s)}>{s}</SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n\r\n                  <Select\r\n                    value={filterSemester}\r\n                    onValueChange={(v: string) => setFilterSemester((v as string) || 'all')}\r\n                  >\r\n                    <SelectTrigger size=\"sm\" className=\"w-40\">\r\n                      <SelectValue />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"all\">All Semesters</SelectItem>\r\n                      {semesters.map(s => (\r\n                        <SelectItem key={s} value={String(s)}>{s}</SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n\r\n                  <Button variant=\"secondary\" onClick={clearFilters}>\r\n                    Clear Filters\r\n                  </Button>\r\n\r\n                  <Button variant=\"default\" onClick={downloadCSV}>\r\n                    Download CSV\r\n                  </Button>\r\n                </>\r\n              )}\r\n            </div>\r\n          </CardHeader>\r\n\r\n          <Separator />\r\n\r\n          <CardContent className=\"pt-4 overflow-x-auto rounded-lg relative\">\r\n            {isLoading ? (\r\n              <div className=\"py-20 flex items-center justify-center\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"inline-block rounded-full animate-spin border-4 border-gray-200 border-t-primary w-12 h-12\" />\r\n                  <div className=\"mt-3 text-sm text-muted-foreground\">Loading leaderboard…</div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                {isFiltering && (\r\n                  <div className=\"absolute inset-0 z-10 bg-background/60 backdrop-blur flex items-center justify-center\">\r\n                    <div className=\"inline-block rounded-full animate-spin border-4 border-gray-200 border-t-primary w-10 h-10\" />\r\n                  </div>\r\n                )}\r\n\r\n                <table className={`min-w-[900px] w-full border-collapse text-sm ${isFiltering ? 'opacity-60' : ''}`}>\r\n                  <thead>\r\n                    <tr className=\"text-muted-foreground bg-muted/40 text-center\">\r\n                      <th className=\"py-3 px-3 text-left\">Rank</th>\r\n                      <th className=\"py-3 px-3 text-left w-[50%]\">Leader</th>\r\n                      <th className=\"py-3 px-3 text-center\">Global Rank</th>\r\n                      <th className=\"py-3 px-3 text-center\">E,M,H</th>\r\n                      <th className=\"py-3 px-3 text-center\">Total</th>\r\n                      <th className=\"py-3 px-3 text-center\">Streak</th>\r\n                      <th className=\"py-3 px-3 text-center\">Sem Sec</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {filtered.map((user, _idx) => {\r\n                      const dbRankNum = dbRankMap.get(user.user_id)\r\n                      const dbRank = dbRankNum ?? '-'\r\n                      const sem = user.semester ?? ''\r\n                      const sec = user.section ?? ''\r\n                      const semSec = sem || sec ? `${sem}${sem && sec ? ' ' : ''}${sec}` : '-'\r\n                      const highlight = dbRankNum === 1\r\n                        ? 'bg-yellow-50 dark:bg-yellow-900/10'\r\n                        : dbRankNum === 2\r\n                          ? 'bg-gray-50 dark:bg-gray-800/30'\r\n                          : dbRankNum === 3\r\n                            ? 'bg-amber-50 dark:bg-amber-900/10'\r\n                            : ''\r\n\r\n                      // Ensure a stable key even if test fixtures use `id` instead of `user_id`\r\n                      const rowKey = user.user_id ?? (user as any).id ?? user.username ?? `row-${_idx}`\r\n\r\n                      return (\r\n                        <tr\r\n                          key={rowKey}\r\n                          className={`border-b hover:bg-muted/10 transition-colors text-center ${highlight}`}\r\n                        >\r\n                          <td className=\"py-3 text-left pl-3 font-semibold text-muted-foreground\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              {dbRankNum && dbRankNum <= 3 ? (\r\n                                <>\r\n                                  {dbRankNum === 1 ? (\r\n                                    <Medal className=\"h-4 w-4 text-yellow-500\" />\r\n                                  ) : dbRankNum === 2 ? (\r\n                                    <Medal className=\"h-4 w-4 text-gray-400\" />\r\n                                  ) : (\r\n                                    <Medal className=\"h-4 w-4 text-amber-700\" />\r\n                                  )}\r\n                                  <span className=\"text-sm font-medium\">{dbRank}</span>\r\n                                </>\r\n                              ) : (\r\n                                <span className=\"text-muted-foreground\">{dbRank}</span>\r\n                              )}\r\n                            </div>\r\n                          </td>\r\n\r\n                          <td className=\"py-3 text-left w-[50%]\">\r\n                            <div>\r\n                              <div className=\"font-medium truncate max-w-[600px]\">{user.real_name}</div>\r\n                              <div className=\"text-xs text-muted-foreground\">@{user.username}</div>\r\n                            </div>\r\n                          </td>\r\n\r\n                          <td className=\"py-3 text-center\">{user.global_rank ?? '-'}</td>\r\n\r\n                          <td className=\"py-3 text-center\">\r\n                            <div className=\"inline-flex items-center gap-2\">\r\n                              <span className=\"text-xs px-2 py-1 rounded bg-green-100 text-green-800\">{user.easy_solved}</span>\r\n                              <span className=\"text-xs px-2 py-1 rounded bg-yellow-100 text-yellow-800\">{user.medium_solved}</span>\r\n                              <span className=\"text-xs px-2 py-1 rounded bg-red-100 text-red-800\">{user.hard_solved}</span>\r\n                            </div>\r\n                          </td>\r\n\r\n                          <td className=\"font-semibold\">{user.total_solved}</td>\r\n                          <td>{user.streak_count}</td>\r\n                          <td>{semSec}</td>\r\n                        </tr>\r\n                      )\r\n                    })}\r\n                  </tbody>\r\n                </table>\r\n              </>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </>\r\n  )\r\n}","usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\pages\\Login.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\CollegeWork\\PESU_SEM_5\\SE\\SE_PROJECT\\PESU_EC_CSE_A_P73_API_Rate_Limiter_Agile-PipeDream\\src\\pages\\SignUp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]